<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playwrite+IN:wght@100..400&display=swap" rel="stylesheet">
    <title>Nossa história</title>
</head>
<body>
    <section class="fotos">
        <h2 class="titulo_fotos">Sobre nós</h2>
        <div class="container">
            <div class="gallery">
                <img src="img/primeira.jpg" alt="Imagem 1" onclick="openModal(0)">
                <img src="img/primeiroNiver.jpg" alt="Imagem 2" onclick="openModal(1)">
                <img src="img/diaNamorados.jpg" alt="Imagem 3" onclick="openModal(2)">
                <img src="img/arraial.jpg" alt="Imagem 4" onclick="openModal(3)">
                <img src="img/paciencia.jpg" alt="Imagem 5" onclick="openModal(4)">
                <img src="img/conchas.jpg" alt="Imagem 6" onclick="openModal(5)">
                <img src="img/novaFriburgo.jpg" alt="Imagem 7" onclick="openModal(6)">
            </div>    
         </div>

        <div class="informacoes">
            <div class="card__informocao">
                <div class="descrição">
                    <h2 class="descrição__titulo">Gostariamos de compartilhar um pouco da nossa história!</h2>
                    <h2 class="inicio_descricao">Queridos amigos e familiares,</h2>
                    <p class="texto"> 
                        estamos prestes a viver um momento muito especial em nossas vidas, e queremos compartilhá-lo com vocês. Aqui estão algumas fotos que capturam nossa trajetória até aqui. Cada imagem representa um momento único e especial. Sintam-se à vontade para clicar nas fotos e descobrir as histórias por trás de cada uma.
        </div>

        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <img id="modalImage" src="" alt="Imagem Modal">
                <p id="modalText"></p>
                <button class="prev" onclick="changeImage(-1)">&#10094;</button>
                <button class="next" onclick="changeImage(1)">&#10095;</button>
            </div>
        </div>

        <audio id="background-music" >
            <source id="audio-source" src="" type="audio/mpeg">
            Seu navegador não suporta o elemento de áudio.
        </audio>
    </section>

    <script>
         const images = [
            { src: 'img/primeira.jpg', text: 'Essa foi a primeira foto nossa, em frente a igreja, não vimos bater a foto.' },
            { src: 'img/primeiroNiver.jpg', text: 'Esse foi o primeiro aniversário dela comemorando juntos em abril de 2012' },
            { src: 'img/diaNamorados.jpg', text: 'Nosso primeiro dia dos namorados juntos, na praia de Copacabana em 2012' },
            { src: 'img/arraial.jpg', text: 'Nosso primeiro carnaval viajando juntos em 2013' },
            { src: 'img/paciencia.jpg', text: 'Momento descontraído no casamento de Daniel e Luise, ela sempre tentando me arrumar pra tirar fotos e eu sempre fazendo graça' },
            { src: 'img/conchas.jpg', text: 'Que FOTÃO, um belo registro na praia das conchas em agosto de 2020, nossa primeira férias juntos' },
            { src: 'img/novaFriburgo.jpg', text: 'Um final de semana em Nova Friburgo e fomos surpreendidos com um festival!!! (Maifest)' }
        ];
        const musicList = [
            'audio/amorSemMedida.mp3',
            'audio/Contrato.mp3',
            'audio/vemPraMinhaVida.mp3'
        ];

        let musicPlayed = false;
        let shuffledMusicList = [];
        let currentMusicIndex = 0

        function shuffleMusicList() {
            shuffledMusicList =[...musicList].sort(() => Math.random() - 0.5);
        }

        function playMusic() {
            if (!musicPlayed) {
                shuffleMusicList();
                playNextMusic();
                musicPlayed = true;
            }
        }

        function playNextMusic() {
            if (currentMusicIndex < shuffledMusicList.length) {
                const audio = document.getElementById('background-music');
                const audioSource = document.getElementById('audio-source');
                audioSource.src = shuffledMusicList[currentMusicIndex];
                audio.load();
                audio.play();
                currentMusicIndex++;
                audio.removeEventListener('ended', playNextMusic)
                audio.addEventListener('ended', playNextMusic);
            }
        }

        
        function openModal(index) {
            currentIndex = index;
            updateModal();
            document.getElementById('myModal').style.display = 'flex';
            playMusic();
        
        }

        function closeModal() {
            document.getElementById('myModal').style.display = 'none';
        }

        function changeImage(direction) {
            currentIndex = (currentIndex + direction + images.length) % images.length;
            updateModal();
        }

        function updateModal() {
            document.getElementById('modalImage').src = images[currentIndex].src;
            document.getElementById('modalText').innerText = images[currentIndex].text;
        }
    </script>
</body>
</html>